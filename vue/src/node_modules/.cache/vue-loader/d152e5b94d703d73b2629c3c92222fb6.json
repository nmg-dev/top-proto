{"remainingRequest":"C:\\Users\\NMG-송용근\\go\\src\\github.com\\nmg-dev\\top-proto\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\NMG-송용근\\go\\src\\github.com\\nmg-dev\\top-proto\\vue\\src\\components\\daterange.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\NMG-송용근\\go\\src\\github.com\\nmg-dev\\top-proto\\vue\\src\\components\\daterange.vue","mtime":1558438318821},{"path":"C:\\Users\\NMG-송용근\\go\\src\\github.com\\nmg-dev\\top-proto\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\NMG-송용근\\go\\src\\github.com\\nmg-dev\\top-proto\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\NMG-송용근\\go\\src\\github.com\\nmg-dev\\top-proto\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    name: 'daterange',\r\n    props: {\r\n        focus: { default: Date.now() },\r\n        from: undefined,\r\n        till: undefined,\r\n        activated: { type: Function },\r\n        selected: { type: Function },\r\n        canceled: { type: Function },\r\n\r\n        titleFormat: { type: String, default: 'YYYY-MM' },\r\n    },\r\n    data: function() {\r\n        return {\r\n            periodFrom: this.from,\r\n            periodTill: this.till,\r\n            focused: this.$moment(this.focus),\r\n            calendarMonth: undefined,\r\n            calendar: [],\r\n        };\r\n    },\r\n    \r\n    beforeUpdate: function() { this.updateValues(); },\r\n    beforeMount: function() { this.focused = this.$moment(this.focus); this.updateValues(); },\r\n    methods: {\r\n        moveMonths: function(radix) {\r\n            window.console.log(radix, this.focused.format('YYYY-MM-DD'));\r\n            let nextMoment = this.focused.add(radix, 'month');\r\n            let nextMonth = this.focused.format(this.titleFormat || 'YYYY-MM');\r\n            this.calendarMonth = nextMonth;\r\n            window.console.log(radix, nextMonth, this.calendarMonth);\r\n            this.$forceUpdate();\r\n        },\r\n        updateValues: function() {\r\n            // this.focused = this.$moment(this.focus);\r\n            this.calendarMonth = this.focused.format(this.titleFormat || 'YYYY-MM');\r\n            this.calendar = (function() {\r\n                if(!this.focused)\r\n                    this.focused = this.$moment();\r\n                let theMonth = '' + this.focused.format('YYYY-MM');\r\n                let cursor = this.$moment(this.focused.valueOf())\r\n                    .startOf('month')\r\n                    .startOf('week');\r\n                let cMonth;\r\n                let _cal = [];\r\n                do {\r\n                    let _wds = Array(7);\r\n                    for(let w=0; w<7; w++) {\r\n                        cursor = cursor.day(w);\r\n                        cMonth = cursor.format('YYYY-MM');\r\n                        _wds[w] = {\r\n                            month: cMonth, \r\n                            date: cursor.date().toString(), \r\n                            title: cursor.format('YYYY-MM-DD')\r\n                        };\r\n                        cursor.add(1, 'day');\r\n                    }\r\n                    _cal.push(_wds);\r\n                } while(cMonth===theMonth);\r\n                window.console.log(_cal);\r\n\r\n                return _cal;\r\n            }).bind(this)();\r\n\r\n            this.$forceUpdate();\r\n        },\r\n    }\r\n}\r\n",{"version":3,"sources":["daterange.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"daterange.vue","sourceRoot":"components","sourcesContent":["<template>\r\n    <b-dropdown class=\"m-0 p-0\" split>\r\n        <template slot=\"button-content\">\r\n            <b-input-group>\r\n                <b-input-group-text>\r\n                    <img src=\"../assets/icon-calendar.png\" alt=\"calendar\" />\r\n                </b-input-group-text>\r\n                <b-form-input :value=\"periodFrom\"></b-form-input>\r\n                <b-form-input :value=\"periodTill\"></b-form-input>\r\n            </b-input-group>\r\n        </template>\r\n        <b-dropdown-form>\r\n            <div class=\"input-group\">\r\n                <div class=\"input-group-prepend\">\r\n                    <button @click=\"moveMonths(-12)\" class=\"btn bs-daterange-control bs-daterange-prev bs-daterange-year\">\r\n                        <i class=\"fas fa-angle-double-left\"></i>\r\n                    </button>\r\n                    <button @click=\"moveMonths(-1)\" class=\"btn bs-daterange-control bs-daterange-prev bs-daterange-month\">\r\n                        <i class=\"fas fa-angle-left\"></i>\r\n                    </button>\r\n                </div>\r\n                <input class=\"form-control bs-daterange-calendar-month\" type=\"text\" :key=\"calendarMonth\" :value=\"calendarMonth\" disabled>\r\n                <div class=\"input-group-append\">\r\n                    <button @click=\"moveMonths(1)\" class=\"btn bs-daterange-control bs-daterange-next bs-daterange-month\">\r\n                        <i class=\"fas fa-angle-right\"></i>\r\n                    </button>\r\n                    <button @click=\"moveMonths(12)\" class=\"btn bs-daterange-control bs-daterange-next bs-daterange-year\">\r\n                        <i class=\"fas fa-angle-double-right\"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <table class=\"bs-daterange-calendar-table\" :key=\"calendarMonth\">\r\n                <thead>\r\n                    <tr>\r\n                        <template v-for=\"w in $moment.weekdaysShort()\">\r\n                            <td class=\"weekday-w\" :key=\"`weekday-${w.toLowerCase()}`\">{{ w }}</td>\r\n                        </template>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <template v-for=\"(week, widx) in calendar\">\r\n                        <tr :key=\"`calendar-week-${widx}`\">\r\n                            <template v-for=\"(day, didx) in week\">\r\n                                <td :class=\"`calendar-day ${day.month}`\" :key=\"`calendar-w${widx}-d${didx}`\">{{ day.date }}</td>\r\n                            </template>\r\n                        </tr>\r\n                    </template>\r\n                </tbody>\r\n            </table>\r\n        </b-dropdown-form>\r\n    </b-dropdown>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'daterange',\r\n    props: {\r\n        focus: { default: Date.now() },\r\n        from: undefined,\r\n        till: undefined,\r\n        activated: { type: Function },\r\n        selected: { type: Function },\r\n        canceled: { type: Function },\r\n\r\n        titleFormat: { type: String, default: 'YYYY-MM' },\r\n    },\r\n    data: function() {\r\n        return {\r\n            periodFrom: this.from,\r\n            periodTill: this.till,\r\n            focused: this.$moment(this.focus),\r\n            calendarMonth: undefined,\r\n            calendar: [],\r\n        };\r\n    },\r\n    \r\n    beforeUpdate: function() { this.updateValues(); },\r\n    beforeMount: function() { this.focused = this.$moment(this.focus); this.updateValues(); },\r\n    methods: {\r\n        moveMonths: function(radix) {\r\n            window.console.log(radix, this.focused.format('YYYY-MM-DD'));\r\n            let nextMoment = this.focused.add(radix, 'month');\r\n            let nextMonth = this.focused.format(this.titleFormat || 'YYYY-MM');\r\n            this.calendarMonth = nextMonth;\r\n            window.console.log(radix, nextMonth, this.calendarMonth);\r\n            this.$forceUpdate();\r\n        },\r\n        updateValues: function() {\r\n            // this.focused = this.$moment(this.focus);\r\n            this.calendarMonth = this.focused.format(this.titleFormat || 'YYYY-MM');\r\n            this.calendar = (function() {\r\n                if(!this.focused)\r\n                    this.focused = this.$moment();\r\n                let theMonth = '' + this.focused.format('YYYY-MM');\r\n                let cursor = this.$moment(this.focused.valueOf())\r\n                    .startOf('month')\r\n                    .startOf('week');\r\n                let cMonth;\r\n                let _cal = [];\r\n                do {\r\n                    let _wds = Array(7);\r\n                    for(let w=0; w<7; w++) {\r\n                        cursor = cursor.day(w);\r\n                        cMonth = cursor.format('YYYY-MM');\r\n                        _wds[w] = {\r\n                            month: cMonth, \r\n                            date: cursor.date().toString(), \r\n                            title: cursor.format('YYYY-MM-DD')\r\n                        };\r\n                        cursor.add(1, 'day');\r\n                    }\r\n                    _cal.push(_wds);\r\n                } while(cMonth===theMonth);\r\n                window.console.log(_cal);\r\n\r\n                return _cal;\r\n            }).bind(this)();\r\n\r\n            this.$forceUpdate();\r\n        },\r\n    }\r\n}\r\n</script>"]}]}